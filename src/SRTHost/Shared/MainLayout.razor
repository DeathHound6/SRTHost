@using MudBlazor;
@inherits LayoutComponentBase

<MudThemeProvider @bind-IsDarkMode="@isDarkMode" Theme="theme" />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout Class="mud-height-full">
        <MudAppBar>
        <MudIconButton Icon="@(open ? Icons.Material.Filled.Close : Icons.Material.Filled.Menu)" Color="Color.Inherit" Edge="Edge.Start" OnClick="@((e) => setOpen())" />
            <MudSpacer />
            <MudSwitch 
                @bind-Checked="@isDarkMode" 
                Color="Color.Primary" 
                Class="ma-4" T="bool"
                   Label="@getLabel()"
                   ThumbIcon="@(isDarkMode==true ? Icons.Material.Filled.Brightness3 : Icons.Material.Filled.WbSunny)"
                   ThumbIconColor="Color.Tertiary" />
        </MudAppBar>
        <MudDrawer Class="mud-height-full" @bind-Open="@open">
                <NavMenu />
            </MudDrawer>
        <MudMainContent Class="mud-height-full">
            @Body
        </MudMainContent>
</MudLayout>

@code {
    private bool open = true;
    private bool isDarkMode = true;

    void setOpen()
    {
        open = !open;
    }

    private string getLabel()
    {
        if (isDarkMode == true)
            return "Toggle Light Mode";
        else
            return "Toggle Dark Mode";
    }

    private MudTheme theme = new MudTheme()
        {
            Palette = new PaletteLight()
            {
                Primary = Colors.Shades.White,
                Secondary = Colors.DeepPurple.Lighten1,
                Tertiary = Colors.Shades.Black,
                Dark = Colors.Shades.White,
                Background = Colors.DeepPurple.Lighten5,
                AppbarBackground = Colors.DeepPurple.Darken1,
                DrawerBackground = Colors.DeepPurple.Darken1,
                DrawerText = Colors.Shades.White,
            },
            PaletteDark = new PaletteDark()
            {
                Primary = Colors.DeepPurple.Lighten1,
                Secondary = Colors.DeepPurple.Lighten1,
                Tertiary = Colors.Shades.White,
                Dark = Colors.Grey.Darken3,
                Background = Colors.Grey.Darken3,
                AppbarBackground = Colors.Grey.Darken4,
                DrawerBackground = Colors.Grey.Darken4,
                DrawerText = Colors.Shades.White,
            },
        };
}